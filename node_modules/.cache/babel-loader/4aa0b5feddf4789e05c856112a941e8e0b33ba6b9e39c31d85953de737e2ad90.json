{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Akshay\\\\Desktop\\\\firebase-auth-methods-main\\\\phone-otp\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\n// react router\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\n//components\nimport SignIn from \"./components/SignIn\";\nimport Home from \"./components/Home\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [viewOtpForm, setViewOtpForm] = useState(false);\n  const [user, setUser] = useState(false);\n  const firebaseConfig = {\n    apiKey: \"AIzaSyAdODx3GUKzuqH11VDJsNnPNFvVYJc9MWU\",\n    authDomain: \"loginapp-b0b7a.firebaseapp.com\",\n    projectId: \"loginapp-b0b7a\",\n    storageBucket: \"loginapp-b0b7a.appspot.com\",\n    messagingSenderId: \"503925603916\",\n    appId: \"1:503925603916:web:c32800d0887307879e3ee9\"\n  };\n  useEffect(() => {\n    window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(\"recaptcha-container\", {\n      size: \"invisible\",\n      callback: function (response) {\n        console.log(\"Captcha Resolved\");\n        this.onSignInSubmit();\n      },\n      defaultCountry: \"IN\"\n    });\n  }, []);\n  if (!firebase.apps.length) {\n    firebase.initializeApp(firebaseConfig);\n  } else {\n    firebase.app(); // if already initialized, use that one\n  }\n\n  const auth = firebase.auth();\n  auth.onAuthStateChanged(user => {\n    if (user) {\n      setUser(user);\n    }\n  });\n  const loginSubmit = e => {\n    e.preventDefault();\n    let phone_number = \"+91\" + e.target.phone.value;\n    const appVerifier = window.recaptchaVerifier;\n    auth.signInWithPhoneNumber(phone_number, appVerifier).then(confirmationResult => {\n      // SMS sent. Prompt user to type the code from the message, then sign the\n      // user in with confirmationResult.confirm(code).\n      console.log(\"otp sent\");\n      setViewOtpForm(true);\n      window.confirmationResult = confirmationResult;\n      // ...\n    }).catch(error => {\n      // Error; SMS not sent\n      // ...\n      alert(error.message);\n    });\n  };\n  const otpSubmit = e => {\n    e.preventDefault();\n    let opt_number = e.target.otp_value.value;\n    window.confirmationResult.confirm(opt_number).then(confirmationResult => {\n      console.log(confirmationResult);\n      console.log(\"success\");\n      window.open(\"/\", \"_self\");\n    }).catch(error => {\n      // User couldn't sign in (bad verification code?)\n      alert(error.message);\n    });\n  };\n  const signOut = () => {\n    firebase.auth().signOut().then(() => {\n      window.open(\"/signin\", \"_self\");\n    }).catch(error => {\n      // An error happened.\n      console.log(error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"recaptcha-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        exact: true,\n        children: [/*#__PURE__*/_jsxDEV(SignIn, {\n          loginSubmit: loginSubmit,\n          otpSubmit: otpSubmit,\n          viewOtpForm: viewOtpForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), \"user?\", /*#__PURE__*/_jsxDEV(Home, {\n          signOut: signOut,\n          user: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 16\n        }, this), \":\\\"Error\\\";\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"ZrHH9yGSTnVX5bp74lwNE6N6c24=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","firebase","BrowserRouter","Router","Route","Switch","SignIn","Home","App","viewOtpForm","setViewOtpForm","user","setUser","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","window","recaptchaVerifier","auth","RecaptchaVerifier","size","callback","response","console","log","onSignInSubmit","defaultCountry","apps","length","initializeApp","app","onAuthStateChanged","loginSubmit","e","preventDefault","phone_number","target","phone","value","appVerifier","signInWithPhoneNumber","then","confirmationResult","catch","error","alert","message","otpSubmit","opt_number","otp_value","confirm","open","signOut"],"sources":["C:/Users/Akshay/Desktop/firebase-auth-methods-main/phone-otp/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\n\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\n// react router\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\n//components\nimport SignIn from \"./components/SignIn\";\nimport Home from \"./components/Home\";\n\nconst App = () => {\n  const [viewOtpForm, setViewOtpForm] = useState(false);\n  const [user, setUser] = useState(false);\n  const firebaseConfig = {\n    apiKey: \"AIzaSyAdODx3GUKzuqH11VDJsNnPNFvVYJc9MWU\",\n    authDomain: \"loginapp-b0b7a.firebaseapp.com\",\n    projectId: \"loginapp-b0b7a\",\n    storageBucket: \"loginapp-b0b7a.appspot.com\",\n    messagingSenderId: \"503925603916\",\n    appId: \"1:503925603916:web:c32800d0887307879e3ee9\"\n  };\n\n  useEffect(() => {\n    window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(\n      \"recaptcha-container\",\n      {\n        size: \"invisible\",\n        callback: function (response) {\n          console.log(\"Captcha Resolved\");\n          this.onSignInSubmit();\n        },\n        defaultCountry: \"IN\",\n      }\n    );\n  }, []);\n\n  if (!firebase.apps.length) {\n    firebase.initializeApp(firebaseConfig);\n  } else {\n    firebase.app(); // if already initialized, use that one\n  }\n\n  const auth = firebase.auth();\n\n  auth.onAuthStateChanged((user) => {\n    if (user) {\n      setUser(user);\n    }\n  });\n\n  const loginSubmit = (e) => {\n    e.preventDefault();\n\n    let phone_number = \"+91\" + e.target.phone.value;\n    const appVerifier = window.recaptchaVerifier;\n\n    auth\n      .signInWithPhoneNumber(phone_number, appVerifier)\n      .then((confirmationResult) => {\n        // SMS sent. Prompt user to type the code from the message, then sign the\n        // user in with confirmationResult.confirm(code).\n        console.log(\"otp sent\");\n        setViewOtpForm(true);\n        window.confirmationResult = confirmationResult;\n        // ...\n      })\n      .catch((error) => {\n        // Error; SMS not sent\n        // ...\n        alert(error.message);\n      });\n  };\n\n  const otpSubmit = (e) => {\n    e.preventDefault();\n\n    let opt_number = e.target.otp_value.value;\n\n    window.confirmationResult\n      .confirm(opt_number)\n      .then((confirmationResult) => {\n        console.log(confirmationResult);\n        console.log(\"success\");\n        window.open(\"/\", \"_self\");\n      })\n      .catch((error) => {\n        // User couldn't sign in (bad verification code?)\n        alert(error.message);\n      });\n  };\n\n  const signOut = () => {\n    firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        window.open(\"/signin\", \"_self\");\n      })\n      .catch((error) => {\n        // An error happened.\n        console.log(error);\n      });\n  };\n\n  return (\n    <Router>\n      <div id=\"recaptcha-container\"></div>\n      <Switch>\n        \n        <Route path=\"/\" exact>\n          <SignIn\n            loginSubmit={loginSubmit}\n            otpSubmit={otpSubmit}\n            viewOtpForm={viewOtpForm}\n\n          />\n          user?<Home signOut={signOut} user={user} />:\"Error\";\n        </Route>\n      </Switch>\n    </Router>\n  );\n};\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAO,WAAW;AAElB,OAAOC,QAAQ,MAAM,cAAc;AACnC,OAAO,eAAe;;AAEtB;AACA,SAASC,aAAa,IAAIC,MAAM,EAAEC,KAAK,EAAEC,MAAM,QAAQ,kBAAkB;;AAEzE;AACA,OAAOC,MAAM,MAAM,qBAAqB;AACxC,OAAOC,IAAI,MAAM,mBAAmB;AAAC;AAErC,MAAMC,GAAG,GAAG,MAAM;EAAA;EAChB,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACW,IAAI,EAAEC,OAAO,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAMa,cAAc,GAAG;IACrBC,MAAM,EAAE,yCAAyC;IACjDC,UAAU,EAAE,gCAAgC;IAC5CC,SAAS,EAAE,gBAAgB;IAC3BC,aAAa,EAAE,4BAA4B;IAC3CC,iBAAiB,EAAE,cAAc;IACjCC,KAAK,EAAE;EACT,CAAC;EAEDpB,SAAS,CAAC,MAAM;IACdqB,MAAM,CAACC,iBAAiB,GAAG,IAAIpB,QAAQ,CAACqB,IAAI,CAACC,iBAAiB,CAC5D,qBAAqB,EACrB;MACEC,IAAI,EAAE,WAAW;MACjBC,QAAQ,EAAE,UAAUC,QAAQ,EAAE;QAC5BC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;QAC/B,IAAI,CAACC,cAAc,EAAE;MACvB,CAAC;MACDC,cAAc,EAAE;IAClB,CAAC,CACF;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,IAAI,CAAC7B,QAAQ,CAAC8B,IAAI,CAACC,MAAM,EAAE;IACzB/B,QAAQ,CAACgC,aAAa,CAACpB,cAAc,CAAC;EACxC,CAAC,MAAM;IACLZ,QAAQ,CAACiC,GAAG,EAAE,CAAC,CAAC;EAClB;;EAEA,MAAMZ,IAAI,GAAGrB,QAAQ,CAACqB,IAAI,EAAE;EAE5BA,IAAI,CAACa,kBAAkB,CAAExB,IAAI,IAAK;IAChC,IAAIA,IAAI,EAAE;MACRC,OAAO,CAACD,IAAI,CAAC;IACf;EACF,CAAC,CAAC;EAEF,MAAMyB,WAAW,GAAIC,CAAC,IAAK;IACzBA,CAAC,CAACC,cAAc,EAAE;IAElB,IAAIC,YAAY,GAAG,KAAK,GAAGF,CAAC,CAACG,MAAM,CAACC,KAAK,CAACC,KAAK;IAC/C,MAAMC,WAAW,GAAGvB,MAAM,CAACC,iBAAiB;IAE5CC,IAAI,CACDsB,qBAAqB,CAACL,YAAY,EAAEI,WAAW,CAAC,CAChDE,IAAI,CAAEC,kBAAkB,IAAK;MAC5B;MACA;MACAnB,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;MACvBlB,cAAc,CAAC,IAAI,CAAC;MACpBU,MAAM,CAAC0B,kBAAkB,GAAGA,kBAAkB;MAC9C;IACF,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;MAChB;MACA;MACAC,KAAK,CAACD,KAAK,CAACE,OAAO,CAAC;IACtB,CAAC,CAAC;EACN,CAAC;EAED,MAAMC,SAAS,GAAId,CAAC,IAAK;IACvBA,CAAC,CAACC,cAAc,EAAE;IAElB,IAAIc,UAAU,GAAGf,CAAC,CAACG,MAAM,CAACa,SAAS,CAACX,KAAK;IAEzCtB,MAAM,CAAC0B,kBAAkB,CACtBQ,OAAO,CAACF,UAAU,CAAC,CACnBP,IAAI,CAAEC,kBAAkB,IAAK;MAC5BnB,OAAO,CAACC,GAAG,CAACkB,kBAAkB,CAAC;MAC/BnB,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;MACtBR,MAAM,CAACmC,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC;IAC3B,CAAC,CAAC,CACDR,KAAK,CAAEC,KAAK,IAAK;MAChB;MACAC,KAAK,CAACD,KAAK,CAACE,OAAO,CAAC;IACtB,CAAC,CAAC;EACN,CAAC;EAED,MAAMM,OAAO,GAAG,MAAM;IACpBvD,QAAQ,CACLqB,IAAI,EAAE,CACNkC,OAAO,EAAE,CACTX,IAAI,CAAC,MAAM;MACVzB,MAAM,CAACmC,IAAI,CAAC,SAAS,EAAE,OAAO,CAAC;IACjC,CAAC,CAAC,CACDR,KAAK,CAAEC,KAAK,IAAK;MAChB;MACArB,OAAO,CAACC,GAAG,CAACoB,KAAK,CAAC;IACpB,CAAC,CAAC;EACN,CAAC;EAED,oBACE,QAAC,MAAM;IAAA,wBACL;MAAK,EAAE,EAAC;IAAqB;MAAA;MAAA;MAAA;IAAA,QAAO,eACpC,QAAC,MAAM;MAAA,uBAEL,QAAC,KAAK;QAAC,IAAI,EAAC,GAAG;QAAC,KAAK;QAAA,wBACnB,QAAC,MAAM;UACL,WAAW,EAAEZ,WAAY;UACzB,SAAS,EAAEe,SAAU;UACrB,WAAW,EAAE1C;QAAY;UAAA;UAAA;UAAA;QAAA,QAEzB,wBACG,QAAC,IAAI;UAAC,OAAO,EAAE+C,OAAQ;UAAC,IAAI,EAAE7C;QAAK;UAAA;UAAA;UAAA;QAAA,QAAG;MAAA;QAAA;QAAA;QAAA;MAAA;IACrC;MAAA;MAAA;MAAA;IAAA,QACD;EAAA;IAAA;IAAA;IAAA;EAAA,QACF;AAEb,CAAC;AAAC,GA/GIH,GAAG;AAAA,KAAHA,GAAG;AAiHT,eAAeA,GAAG;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
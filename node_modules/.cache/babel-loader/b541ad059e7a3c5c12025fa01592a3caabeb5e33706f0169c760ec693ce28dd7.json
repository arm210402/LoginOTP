{"ast":null,"code":"import _slicedToArray from\"C:/Users/Akshay/Desktop/firebase-auth-methods-main/phone-otp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import\"./App.css\";import firebase from\"firebase/app\";import\"firebase/auth\";// react router\nimport{BrowserRouter as Router,Route,Switch}from\"react-router-dom\";//components\nimport SignIn from\"./components/SignIn\";import Home from\"./components/Home\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),viewOtpForm=_useState2[0],setViewOtpForm=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var firebaseConfig={apiKey:\"AIzaSyAdODx3GUKzuqH11VDJsNnPNFvVYJc9MWU\",authDomain:\"loginapp-b0b7a.firebaseapp.com\",projectId:\"loginapp-b0b7a\",storageBucket:\"loginapp-b0b7a.appspot.com\",messagingSenderId:\"503925603916\",appId:\"1:503925603916:web:c32800d0887307879e3ee9\"};useEffect(function(){window.recaptchaVerifier=new firebase.auth.RecaptchaVerifier(\"recaptcha-container\",{size:\"invisible\",callback:function callback(response){console.log(\"Captcha Resolved\");this.onSignInSubmit();},defaultCountry:\"IN\"});},[]);if(!firebase.apps.length){firebase.initializeApp(firebaseConfig);}else{firebase.app();// if already initialized, use that one\n}var auth=firebase.auth();auth.onAuthStateChanged(function(user){if(user){setUser(user);}});var loginSubmit=function loginSubmit(e){e.preventDefault();var phone_number=\"+91\"+e.target.phone.value;var appVerifier=window.recaptchaVerifier;auth.signInWithPhoneNumber(phone_number,appVerifier).then(function(confirmationResult){// SMS sent. Prompt user to type the code from the message, then sign the\n// user in with confirmationResult.confirm(code).\nconsole.log(\"otp sent\");setViewOtpForm(true);window.confirmationResult=confirmationResult;// ...\n}).catch(function(error){// Error; SMS not sent\n// ...\nalert(error.message);});};var otpSubmit=function otpSubmit(e){e.preventDefault();var opt_number=e.target.otp_value.value;window.confirmationResult.confirm(opt_number).then(function(confirmationResult){console.log(confirmationResult);console.log(\"success\");window.open(\"/\",\"_self\");}).catch(function(error){// User couldn't sign in (bad verification code?)\nalert(error.message);});};var signOut=function signOut(){firebase.auth().signOut().then(function(){window.open(\"/signin\",\"_self\");}).catch(function(error){// An error happened.\nconsole.log(error);});};return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container\"}),/*#__PURE__*/_jsx(Switch,{children:/*#__PURE__*/_jsxs(Route,{path:\"/\",exact:true,children:[/*#__PURE__*/_jsx(SignIn,{loginSubmit:loginSubmit,otpSubmit:otpSubmit,viewOtpForm:viewOtpForm}),\"user?\",/*#__PURE__*/_jsx(Home,{signOut:signOut,user:user}),\":\\\"Error\\\";\"]})})]});};export default App;","map":{"version":3,"names":["React","useEffect","useState","firebase","BrowserRouter","Router","Route","Switch","SignIn","Home","App","viewOtpForm","setViewOtpForm","user","setUser","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","window","recaptchaVerifier","auth","RecaptchaVerifier","size","callback","response","console","log","onSignInSubmit","defaultCountry","apps","length","initializeApp","app","onAuthStateChanged","loginSubmit","e","preventDefault","phone_number","target","phone","value","appVerifier","signInWithPhoneNumber","then","confirmationResult","catch","error","alert","message","otpSubmit","opt_number","otp_value","confirm","open","signOut"],"sources":["C:/Users/Akshay/Desktop/firebase-auth-methods-main/phone-otp/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\n\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\n// react router\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\n//components\nimport SignIn from \"./components/SignIn\";\nimport Home from \"./components/Home\";\n\nconst App = () => {\n  const [viewOtpForm, setViewOtpForm] = useState(false);\n  const [user, setUser] = useState(false);\n  const firebaseConfig = {\n    apiKey: \"AIzaSyAdODx3GUKzuqH11VDJsNnPNFvVYJc9MWU\",\n    authDomain: \"loginapp-b0b7a.firebaseapp.com\",\n    projectId: \"loginapp-b0b7a\",\n    storageBucket: \"loginapp-b0b7a.appspot.com\",\n    messagingSenderId: \"503925603916\",\n    appId: \"1:503925603916:web:c32800d0887307879e3ee9\"\n  };\n\n  useEffect(() => {\n    window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(\n      \"recaptcha-container\",\n      {\n        size: \"invisible\",\n        callback: function (response) {\n          console.log(\"Captcha Resolved\");\n          this.onSignInSubmit();\n        },\n        defaultCountry: \"IN\",\n      }\n    );\n  }, []);\n\n  if (!firebase.apps.length) {\n    firebase.initializeApp(firebaseConfig);\n  } else {\n    firebase.app(); // if already initialized, use that one\n  }\n\n  const auth = firebase.auth();\n\n  auth.onAuthStateChanged((user) => {\n    if (user) {\n      setUser(user);\n    }\n  });\n\n  const loginSubmit = (e) => {\n    e.preventDefault();\n\n    let phone_number = \"+91\" + e.target.phone.value;\n    const appVerifier = window.recaptchaVerifier;\n\n    auth\n      .signInWithPhoneNumber(phone_number, appVerifier)\n      .then((confirmationResult) => {\n        // SMS sent. Prompt user to type the code from the message, then sign the\n        // user in with confirmationResult.confirm(code).\n        console.log(\"otp sent\");\n        setViewOtpForm(true);\n        window.confirmationResult = confirmationResult;\n        // ...\n      })\n      .catch((error) => {\n        // Error; SMS not sent\n        // ...\n        alert(error.message);\n      });\n  };\n\n  const otpSubmit = (e) => {\n    e.preventDefault();\n\n    let opt_number = e.target.otp_value.value;\n\n    window.confirmationResult\n      .confirm(opt_number)\n      .then((confirmationResult) => {\n        console.log(confirmationResult);\n        console.log(\"success\");\n        window.open(\"/\", \"_self\");\n      })\n      .catch((error) => {\n        // User couldn't sign in (bad verification code?)\n        alert(error.message);\n      });\n  };\n\n  const signOut = () => {\n    firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        window.open(\"/signin\", \"_self\");\n      })\n      .catch((error) => {\n        // An error happened.\n        console.log(error);\n      });\n  };\n\n  return (\n    <Router>\n      <div id=\"recaptcha-container\"></div>\n      <Switch>\n        \n        <Route path=\"/\" exact>\n          <SignIn\n            loginSubmit={loginSubmit}\n            otpSubmit={otpSubmit}\n            viewOtpForm={viewOtpForm}\n\n          />\n          user?<Home signOut={signOut} user={user} />:\"Error\";\n        </Route>\n      </Switch>\n    </Router>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}